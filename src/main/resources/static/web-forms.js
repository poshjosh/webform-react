!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["React","ReactDOM"],t):"object"==typeof exports?exports.Form=t(require("react"),require("react-dom")):e.Form=t(e.React,e.ReactDOM)}(window,(function(e,t){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=56)}([function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n={logLevel:"info",canLog:function(e){return n.getLogPriority(e)>=n.getLogPriority()},error:function(e,t){n.log("error",e,t)},warn:function(e,t){n.log("warn",e,t)},info:function(e,t){n.log("info",e,t)},debug:function(e,t){n.log("debug",e,t)},verbose:function(e,t){n.trace(e,t)},trace:function(e,t){n.log("trace",e,t)},log:function(e,t,r){if(n.canLog(e)){var o=new Date,i=o.getHours()+":"+o.getMinutes()+":"+o.getSeconds()+"."+o.getMilliseconds();try{return r=r?t+n.toMessage(r):n.toMessage(t),console.info(i+" "+r),!0}catch(e){try{console.error(i+" "+e)}catch(e){}}}return!1},toMessage:function(e){return null===e?"null":void 0===e?"undefined":"object"===r(e)?JSON.stringify(e,n.getCircularReplacer()):"function"==typeof e?e():e},getCircularReplacer:function(){var e=new WeakSet;return function(t,n){if("object"===r(n)&&null!==n){if(e.has(n))return;e.add(n)}return n}},getLogLevel:function(){return n.logLevel},getLogPriority:function(e){return e||(e=n.logLevel),"off"===e?6:"error"===e?5:"warn"===e?4:"info"===e?3:"debug"===e?2:"trace"===e||"verbose"===e?1:"all"===e?0:n.getLogPriority("off")},init:function(e){e.hasOwnProperty("logLevel")&&(n.logLevel=e.logLevel),n.info("log#init Log level: "+e.logLevel)}};e.exports=n},function(t,r){t.exports=e},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,r){var n;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(o){"use strict";void 0===(n=function(e){var t=r(24),n=r(26),o=r(27),i=r(28),u=r(29),a=r(30),s=r(31),c=r(32),f=r(33),l=r(13),p=[n,o,i,a,s,u,c,t,f].reduce((function(e,t){return t(e)}),r(35)),d=r(15)(p);function h(e,t,r,n){var o=p.resolve(e);return arguments.length<2?o:o.then(t,r,n)}function m(e){return function(){for(var t=0,r=arguments.length,n=new Array(r);t<r;++t)n[t]=arguments[t];return d(e,this,n)}}function v(e){for(var t=0,r=arguments.length-1,n=new Array(r);t<r;++t)n[t]=arguments[t+1];return d(e,this,n)}function y(){var e=p._defer();function t(t){e._handler.resolve(t)}function r(t){e._handler.reject(t)}function n(t){e._handler.notify(t)}this.promise=e,this.resolve=t,this.reject=r,this.notify=n,this.resolver={resolve:t,reject:r,notify:n}}return h.promise=function(e){return new p(e)},h.resolve=p.resolve,h.reject=p.reject,h.lift=m,h.try=v,h.attempt=v,h.iterate=p.iterate,h.unfold=p.unfold,h.join=function(){return p.all(arguments)},h.all=function(e){return h(e,p.all)},h.settle=function(e){return h(e,p.settle)},h.any=m(p.any),h.some=m(p.some),h.race=m(p.race),h.map=function(e,t){return h(e,(function(e){return p.map(e,t)}))},h.filter=function(e,t){return h(e,(function(e){return p.filter(e,t)}))},h.reduce=m(p.reduce),h.reduceRight=m(p.reduceRight),h.isPromiseLike=function(e){return e&&"function"==typeof e.then},h.Promise=p,h.defer=function(){return new y},h.TimeoutError=l,h}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;
/*
 * Copyright 2012-2015 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */!function(o){"use strict";void 0===(n=function(e){var t,n,o,i,u;function a(e){return e}function s(e){return e}function c(e){return e}function f(e){return u.promise((function(t,r){e.forEach((function(e){u(e,t,r)}))}))}function l(e){if(!(this instanceof l))return new l(e);n(this,e)}function p(e){var r,n,p,d;return r=(e=e||{}).init||a,n=e.request||s,p=e.success||e.response||c,d=e.error||function(){return u((e.response||c).apply(this,arguments),u.reject,u.reject)},function(a,s){return"object"==typeof a&&(s=a),"function"!=typeof a&&(a=e.client||t),s=r(s||{}),i((function e(t){var r,i;return r={},i={arguments:Array.prototype.slice.call(arguments),client:e},(t="string"==typeof t?{path:t}:t||{}).originator=t.originator||e,o(n.call(r,t,s,i),(function(e){var t,n,o;return o=a,e instanceof l&&(n=e.abort,o=e.client||o,t=e.response,e=e.request),t=t||u(e,(function(e){return u(o(e),(function(e){return p.call(r,e,s,i)}),(function(e){return d.call(r,e,s,i)}))})),n?f([t,n]):t}),(function(e){return u.reject({request:t,error:e})}))}),a)}}return t=r(11),n=r(6),o=r(10),i=r(8),u=r(3),p.ComplexRequest=l,p}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,r){e.exports=t},function(e,t,r){var n;
/*
 * Copyright 2012-2013 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */!function(o){"use strict";void 0===(n=function(){var e={};return function(t){var r,n,o,i;for(t||(t={}),r=1,n=arguments.length;r<n;r+=1)for(i in o=arguments[r])i in t&&(t[i]===o[i]||i in e&&e[i]===o[i])||(t[i]=o[i]);return t}}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){"use strict";var n=r(22),o=r(38),i=r(39),u=r(50),a=r(51),s=r(19).child();s.register("text/uri-list",r(52)),s.register("application/json",r(20)),e.exports=n.wrap(i,{registry:s}).wrap(u).wrap(a).wrap(o,{headers:{Accept:"application/json"}})},function(e,t,r){var n;
/*
 * Copyright 2014 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */!function(o){"use strict";void 0===(n=function(){return function(e,t){return t&&(e.skip=function(){return t}),e.wrap=function(t,r){return t(e,r)},e.chain=function(){return"undefined"!=typeof console&&console.log("rest.js: client.chain() is deprecated, use client.wrap() instead"),e.wrap.apply(this,arguments)},e}}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){(function(n){var o;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(i){"use strict";void 0===(o=function(e){var t,o="undefined"!=typeof setTimeout&&setTimeout,i=function(e,t){return setTimeout(e,t)},u=function(e){return clearTimeout(e)},a=function(e){return o(e,0)};if(void 0!==n&&"[object process]"===Object.prototype.toString.call(n))a=function(e){return n.nextTick(e)};else if(t="undefined"!=typeof MutationObserver&&MutationObserver||"undefined"!=typeof WebKitMutationObserver&&WebKitMutationObserver)a=function(e){var t,r=document.createTextNode("");new e((function(){var e=t;t=void 0,e()})).observe(r,{characterData:!0});var n=0;return function(e){t=e,r.data=n^=1}}(t);else if(!o){var s=r(25);i=function(e,t){return s.setTimer(t,e)},u=s.cancelTimer,a=s.runOnLoop||s.runOnContext}return{setTimer:i,clearTimer:u,asap:a}}.call(t,r,t,e))||(e.exports=o)}(r(2))}).call(this,r(12))},function(e,t,r){var n;
/*
 * Copyright 2014-2015 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */!function(o){"use strict";void 0===(n=function(e){var t=r(3),n=r(17);function o(e,r){return e.then((function(e){return e&&e[r]}),(function(e){return t.reject(e&&e[r])}))}function i(){return o(this,"entity")}function u(){return o(o(this,"status"),"code")}function a(){return o(this,"headers")}function s(e){return e=n(e),o(this.headers(),e)}function c(e){return e=[].concat(e),f(t.reduce(e,(function(e,t){if("string"==typeof t&&(t={rel:t}),"function"!=typeof e.entity.clientFor)throw new Error("Hypermedia response expected");return e.entity.clientFor(t.rel)({params:t.params})}),this))}function f(e){return e.status=u,e.headers=a,e.header=s,e.entity=i,e.follow=c,e}function l(){return f(t.apply(t,arguments))}return l.make=f,l.reject=function(e){return f(t.reject(e))},l.promise=function(e){return f(t.promise(e))},l}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;
/*
 * Copyright 2014 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */!function(o){"use strict";void 0===(n=function(e){var t,n,o;function i(){return n.apply(void 0,arguments)}return t=r(8),i.setDefaultClient=function(e){n=e},i.getDefaultClient=function(){return n},i.resetDefaultClient=function(){n=o},i.setPlatformDefaultClient=function(e){if(o)throw new Error("Unable to redefine platformDefaultClient");n=o=e},t(i)}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t){var r,n,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:u}catch(e){n=u}}();var s,c=[],f=!1,l=-1;function p(){f&&s&&(f=!1,s.length?c=s.concat(c):l=-1,c.length&&d())}function d(){if(!f){var e=a(p);f=!0;for(var t=c.length;t;){for(s=c,c=[];++l<t;)s&&s[l].run();l=-1,t=c.length}s=null,f=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===u||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new h(e,t)),1!==c.length||f||a(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,r){var n;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(o){"use strict";void 0===(n=function(){function e(t){Error.call(this),this.message=t,this.name=e.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(o){"use strict";void 0===(n=function(){return{pending:e,fulfilled:r,rejected:t,inspect:function(e){var n=e.state();return 0===n?{state:"pending"}:n>0?r(e.value):t(e.value)}};function e(){return{state:"pending"}}function t(e){return{state:"rejected",reason:e}}function r(e){return{state:"fulfilled",value:e}}}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(o){"use strict";void 0===(n=function(){return e.tryCatchResolve=t,e;function e(e,r){return arguments.length<2&&(r=t),n;function n(t,n,i){var u=e._defer(),a=i.length;return o({f:t,thisArg:n,args:i,params:new Array(a),i:a-1,call:r},u._handler),u}function o(t,n){if(t.i<0)return r(t.f,t.thisArg,t.params,n);e._handler(t.args[t.i]).fold(i,t,void 0,n)}function i(e,t,r){e.params[e.i]=t,e.i-=1,o(e,r)}}function t(e,t,r,n){try{n.resolve(e.apply(t,r))}catch(e){n.reject(e)}}}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;
/*
 * Copyright 2012-2013 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */!function(o,i){"use strict";void 0===(n=function(e){var t,n,o,u,a;function s(e,t){return 0===e.indexOf(t)}function c(e,r){if(!(this instanceof c))return new c(e,r);e instanceof c?(this._template=e.template,this._params=t({},this._params,r)):(this._template=(e||"").toString(),this._params=r||{})}return t=r(6),o=/([a-z][a-z0-9\+\-\.]*:)\/\/([^@]+@)?(([^:\/]+)(:([0-9]+))?)?(\/[^?#]*)?(\?[^#]*)?(#\S*)?/i,u=/^([a-z][a-z0-9\-\+\.]*:\/\/|\/)/i,a=/([a-z][a-z0-9\+\-\.]*:)\/\/([^@]+@)?(([^:\/]+)(:([0-9]+))?)?\//i,c.prototype={append:function(e,r){return new c(this._template+e,t({},this._params,r))},fullyQualify:function(){if(!i)return this;if(this.isFullyQualified())return this;var e=this._template;return s(e,"//")?e=n.protocol+e:s(e,"/")?e=n.origin+e:this.isAbsolute()||(e=n.origin+n.pathname.substring(0,n.pathname.lastIndexOf("/")+1)),-1===e.indexOf("/",8)&&(e+="/"),new c(e,this._params)},isAbsolute:function(){return u.test(this.build())},isFullyQualified:function(){return a.test(this.build())},isCrossOrigin:function(){if(!n)return!0;var e=this.parts();return e.protocol!==n.protocol||e.hostname!==n.hostname||e.port!==n.port},parts:function(){var e,t;return(t={href:(e=this.fullyQualify().build().match(o))[0],protocol:e[1],host:e[3]||"",hostname:e[4]||"",port:e[6],pathname:e[7]||"",search:e[8]||"",hash:e[9]||""}).origin=t.protocol+"//"+t.host,t.port=t.port||("https:"===t.protocol?"443":"http:"===t.protocol?"80":""),t},build:function(e){return function(e,t){var r,n,o,i;if(r=e,o={},t){for(n in t)(i=new RegExp("\\{"+n+"\\}")).test(r)?r=r.replace(i,encodeURIComponent(t[n]),"g"):o[n]=t[n];for(n in o)r+=-1===r.indexOf("?")?"?":"&",r+=encodeURIComponent(n),null!==o[n]&&void 0!==o[n]&&(r+="=",r+=encodeURIComponent(o[n]))}return r}(this._template,t({},this._params,e))},toString:function(){return this.build()}},n=i?new c(i.href).parts():void 0,c}.call(t,r,t,e))||(e.exports=n)}(r(2),"undefined"!=typeof window?window.location:void 0)},function(e,t,r){var n;
/*
 * Copyright 2012 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */!function(o){"use strict";void 0===(n=function(){return function(e){return e.toLowerCase().split("-").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join("-")}}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;
/*
* Copyright 2014 the original author or authors
* @license MIT, see LICENSE.txt for details
*
* @author Scott Andrews
*/!function(o){"use strict";void 0===(n=function(){return{parse:function(e){var t,r;return t=e.split(";"),{raw:e,type:(r=t[0].trim().split("+"))[0],suffix:r[1]?"+"+r[1]:"",params:t.slice(1).reduce((function(e,t){return e[(t=t.split("="))[0].trim()]=t[1]?t[1].trim():void 0,e}),{})}}}}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;
/*
 * Copyright 2012-2014 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */!function(o){"use strict";void 0===(n=function(e){var t,n,o;return t=r(18),n=r(3),(o=new function e(r){this.lookup=function(e){var o;return o="string"==typeof e?t.parse(e):e,r[o.raw]?r[o.raw]:r[o.type+o.suffix]?r[o.type+o.suffix]:r[o.type]?r[o.type]:r[o.suffix]?r[o.suffix]:n.reject(new Error('Unable to locate converter for mime "'+o.raw+'"'))},this.delegate=function(e){return{read:function(){var t=arguments;return this.lookup(e).then(function(e){return e.read.apply(this,t)}.bind(this))}.bind(this),write:function(){var t=arguments;return this.lookup(e).then(function(e){return e.write.apply(this,t)}.bind(this))}.bind(this)}},this.register=function(e,t){return r[e]=n(t),r[e]},this.child=function(){return new e(Object.create(r))}}({})).register("application/hal",r(40)),o.register("application/json",r(20)),o.register("application/x-www-form-urlencoded",r(47)),o.register("multipart/form-data",r(48)),o.register("text/plain",r(49)),o.register("+json",o.delegate("application/json")),o}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;
/*
 * Copyright 2012-2015 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */!function(o){"use strict";void 0===(n=function(){return function e(t,r){return{read:function(e){return JSON.parse(e,t)},write:function(e){return JSON.stringify(e,r)},extend:e}}()}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){"use strict";const n=r(53),o=r(54),i=r(55);function u(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function a(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function s(e,t){return t.decode?o(e):e}function c(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function f(e){const t=(e=c(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function l(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function p(e,t){u((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const r=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,n)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return(e,r,n)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],r):n[e]=[r]:n[e]=r};case"comma":case"separator":return(t,r,n)=>{const o="string"==typeof r&&r.split("").indexOf(e.arrayFormatSeparator)>-1?r.split(e.arrayFormatSeparator).map(t=>s(t,e)):null===r?r:s(r,e);n[t]=o};default:return(e,t,r)=>{void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(t),n=Object.create(null);if("string"!=typeof e)return n;if(!(e=e.trim().replace(/^[?#&]/,"")))return n;for(const o of e.split("&")){let[e,u]=i(t.decode?o.replace(/\+/g," "):o,"=");u=void 0===u?null:["comma","separator"].includes(t.arrayFormat)?u:s(u,t),r(s(e,t),u,n)}for(const e of Object.keys(n)){const r=n[e];if("object"==typeof r&&null!==r)for(const e of Object.keys(r))r[e]=l(r[e],t);else n[e]=l(r,t)}return!1===t.sort?n:(!0===t.sort?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce((e,t)=>{const r=n[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(r):e[t]=r,e},Object.create(null))}t.extract=f,t.parse=p,t.stringify=(e,t)=>{if(!e)return"";u((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const r=r=>t.skipNull&&null==e[r]||t.skipEmptyString&&""===e[r],n=function(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{const o=r.length;return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[a(t,e),"[",o,"]"].join("")]:[...r,[a(t,e),"[",a(o,e),"]=",a(n,e)].join("")]};case"bracket":return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[a(t,e),"[]"].join("")]:[...r,[a(t,e),"[]=",a(n,e)].join("")];case"comma":case"separator":return t=>(r,n)=>null==n||0===n.length?r:0===r.length?[[a(t,e),"=",a(n,e)].join("")]:[[r,a(n,e)].join(e.arrayFormatSeparator)];default:return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,a(t,e)]:[...r,[a(t,e),"=",a(n,e)].join("")]}}(t),o={};for(const t of Object.keys(e))r(t)||(o[t]=e[t]);const i=Object.keys(o);return!1!==t.sort&&i.sort(t.sort),i.map(r=>{const o=e[r];return void 0===o?"":null===o?a(r,t):Array.isArray(o)?o.reduce(n(r),[]).join("&"):a(r,t)+"="+a(o,t)}).filter(e=>e.length>0).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[r,n]=i(e,"#");return Object.assign({url:r.split("?")[0]||"",query:p(f(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:s(n,t)}:{})},t.stringifyUrl=(e,r)=>{r=Object.assign({encode:!0,strict:!0},r);const n=c(e.url).split("?")[0]||"",o=t.extract(e.url),i=t.parse(o,{sort:!1}),u=Object.assign(i,e.query);let s=t.stringify(u,r);s&&(s="?"+s);let f=function(e){let t="";const r=e.indexOf("#");return-1!==r&&(t=e.slice(r)),t}(e.url);return e.fragmentIdentifier&&(f="#"+a(e.fragmentIdentifier,r)),`${n}${s}${f}`}},function(e,t,r){var n;
/*
 * Copyright 2014 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */!function(o){"use strict";void 0===(n=function(e){var t=r(11),n=r(23);return t.setPlatformDefaultClient(n),t}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;
/*
 * Copyright 2012-2014 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */!function(o,i){"use strict";void 0===(n=function(e){var t,n,o,u,a;function s(e,t){return Object.keys(t||{}).forEach((function(r){if(t.hasOwnProperty(r)&&r in e)try{e[r]=t[r]}catch(e){}})),e}return r(3),t=r(16),n=r(17),o=r(10),u=r(8),a=/[\r|\n]+/,u((function(e){return o.promise((function(r,o){var u,c,f,l,p,d,h,m;if(h={request:e="string"==typeof e?{path:e}:e||{}},e.canceled)return h.error="precanceled",void o(h);if(p=e.entity,e.method=e.method||(p?"POST":"GET"),c=e.method,f=h.url=new t(e.path||"",e.params).build(),m=e.engine||i.XMLHttpRequest)try{for(d in s(u=h.raw=new m,e.mixin),u.open(c,f,!0),s(u,e.mixin),l=e.headers)"Content-Type"===d&&"multipart/form-data"===l[d]||u.setRequestHeader(d,l[d]);e.canceled=!1,e.cancel=function(){e.canceled=!0,u.abort(),o(h)},u.onreadystatechange=function(){e.canceled||u.readyState===(m.DONE||4)&&(h.status={code:u.status,text:u.statusText},h.headers=function(e){var t={};return e?(e.trim().split(a).forEach((function(e){var r,o,i;r=e.indexOf(":"),o=n(e.substring(0,r).trim()),i=e.substring(r+1).trim(),t[o]?Array.isArray(t[o])?t[o].push(i):t[o]=[t[o],i]:t[o]=i})),t):t}(u.getAllResponseHeaders()),h.entity=u.responseText,h.status.code>0?r(h):setTimeout((function(){r(h)}),0))};try{u.onerror=function(){h.error="loaderror",o(h)}}catch(e){}u.send(p)}catch(e){h.error="loaderror",o(h)}else o({request:e,url:f,error:"xhr-not-available"})}))}))}.call(t,r,t,e))||(e.exports=n)}(r(2),"undefined"!=typeof window?window:void 0)},function(e,t,r){var n;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(o){"use strict";void 0===(n=function(e){var t=r(9),n=r(13);function o(e,r,n,o){return t.setTimer((function(){e(n,o,r)}),r)}return function(e){function r(e,t,r){o(i,e,t,r)}function i(e,t){t.resolve(e)}function u(e,t,r){var o=void 0===e?new n("timed out after "+r+"ms"):e;t.reject(o)}return e.prototype.delay=function(e){var t=this._beget();return this._handler.fold(r,e,void 0,t._handler),t},e.prototype.timeout=function(e,r){var n=this._beget(),i=n._handler,a=o(u,e,r,n._handler);return this._handler.visit(i,(function(e){t.clearTimer(a),this.resolve(e)}),(function(e){t.clearTimer(a),this.reject(e)}),i.notify),n},e}}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t){},function(e,t,r){var n;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(o){"use strict";void 0===(n=function(e){var t=r(14),n=r(15);return function(e){var r=n(e),o=e.resolve,i=e.all,u=Array.prototype.reduce,a=Array.prototype.reduceRight,s=Array.prototype.slice;return e.any=function(t){for(var r,n,o=e._defer(),i=o._handler,u=t.length>>>0,a=u,s=[],c=0;c<u;++c)if(void 0!==(n=t[c])||c in t){if((r=e._handler(n)).state()>0){i.become(r),e._visitRemaining(t,c,r);break}r.visit(i,f,l)}else--a;0===a&&i.reject(new RangeError("any(): array must not be empty"));return o;function f(e){s=null,this.resolve(e)}function l(e){this.resolved||(s.push(e),0==--a&&this.reject(s))}},e.some=function(t,r){var n,o,i,u=e._defer(),a=u._handler,s=[],c=[],f=t.length>>>0,l=0;for(i=0;i<f;++i)(void 0!==(o=t[i])||i in t)&&++l;r=Math.max(r,0),n=l-r+1,l=Math.min(r,l),r>l?a.reject(new RangeError("some(): array must contain at least "+r+" item(s), but had "+l)):0===l&&a.resolve(s);for(i=0;i<f;++i)(void 0!==(o=t[i])||i in t)&&e._handler(o).visit(a,p,d,a.notify);return u;function p(e){this.resolved||(s.push(e),0==--l&&(c=null,this.resolve(s)))}function d(e){this.resolved||(c.push(e),0==--n&&(s=null,this.reject(c)))}},e.settle=function(e){return i(e.map(c))},e.map=function(t,r){return e._traverse(r,t)},e.filter=function(t,r){var n=s.call(t);return e._traverse(r,n).then((function(t){return function(t,r){for(var n=r.length,o=new Array(n),i=0,u=0;i<n;++i)r[i]&&(o[u++]=e._handler(t[i]).value);return o.length=u,o}(n,t)}))},e.reduce=function(e,t){return arguments.length>2?u.call(e,f(t),arguments[2]):u.call(e,f(t))},e.reduceRight=function(e,t){return arguments.length>2?a.call(e,f(t),arguments[2]):a.call(e,f(t))},e.prototype.spread=function(e){return this.then(i).then((function(t){return e.apply(this,t)}))},e;function c(r){var n;return r instanceof e&&(n=r._handler.join()),n&&0===n.state()||!n?o(r).then(t.fulfilled,t.rejected):(n._unreport(),t.inspect(n))}function f(e){return function(t,n,o){return r(e,void 0,[t,n,o])}}}}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(o){"use strict";void 0===(n=function(){return function(r){var n=r.resolve,o=r.reject,i=r.prototype.catch;function u(e,t){return function(r){return function(e,t){return function(e){return e===Error||null!=e&&e.prototype instanceof Error}(t)?e instanceof t:t(e)}(r,t)?e.call(this,r):o(r)}}function a(e,t,r,o){var i,u=e.call(t);return"object"!=typeof(i=u)&&"function"!=typeof i||null===i?r(o):function(e,t,r){return n(e).then((function(){return t(r)}))}(u,r,o)}return r.prototype.done=function(e,t){this._handler.visit(this._handler.receiver,e,t)},r.prototype.catch=r.prototype.otherwise=function(t){return arguments.length<2?i.call(this,t):"function"!=typeof t?this.ensure(e):i.call(this,u(arguments[1],t))},r.prototype.finally=r.prototype.ensure=function(e){return"function"!=typeof e?this:this.then((function(r){return a(e,this,t,r)}),(function(t){return a(e,this,o,t)}))},r.prototype.else=r.prototype.orElse=function(e){return this.then(void 0,(function(){return e}))},r.prototype.yield=function(e){return this.then((function(){return e}))},r.prototype.tap=function(e){return this.then(e).yield(this)},r};function e(){throw new TypeError("catch predicate must be a function")}function t(e){return e}}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(o){"use strict";void 0===(n=function(){return function(e){return e.prototype.fold=function(t,r){var n=this._beget();return this._handler.fold((function(r,n,o){e._handler(r).fold((function(e,r,n){n.resolve(t.call(this,r,e))}),n,this,o)}),r,n._handler.receiver,n._handler),n},e}}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(o){"use strict";void 0===(n=function(e){var t=r(14).inspect;return function(e){return e.prototype.inspect=function(){return t(e._handler(this))},e}}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(o){"use strict";void 0===(n=function(){return function(e){var t=e.resolve;return e.iterate=function(e,t,n,o){return r((function(t){return[t,e(t)]}),t,n,o)},e.unfold=r,e;function r(e,n,o,i){return t(i).then((function(r){return t(n(r)).then((function(n){return n?r:t(e(r)).spread(u)}))}));function u(i,u){return t(o(i)).then((function(){return r(e,n,o,u)}))}}}}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(o){"use strict";void 0===(n=function(){return function(e){return e.prototype.progress=function(e){return this.then(void 0,void 0,e)},e}}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(o){"use strict";void 0===(n=function(){return function(e){return e.prototype.with=e.prototype.withThis=function(e){var t=this._beget(),r=t._handler;return r.receiver=e,this._handler.chain(r,e),t},e}}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(o){"use strict";void 0===(n=function(e){var t=r(9).setTimer,n=r(34);return function(e){var r,u=i,a=i;"undefined"!=typeof console&&(r=console,u=void 0!==r.error?function(e){r.error(e)}:function(e){r.log(e)},a=void 0!==r.info?function(e){r.info(e)}:function(e){r.log(e)}),e.onPotentiallyUnhandledRejection=function(e){d(l,e)},e.onPotentiallyUnhandledRejectionHandled=function(e){d(p,e)},e.onFatalRejection=function(e){d(o,e.value)};var s=[],c=[],f=null;function l(e){e.handled||(c.push(e),u("Potentially unhandled rejection ["+e.id+"] "+n.formatError(e.value)))}function p(e){var t=c.indexOf(e);t>=0&&(c.splice(t,1),a("Handled previous rejection ["+e.id+"] "+n.formatObject(e.value)))}function d(e,r){s.push(e,r),null===f&&(f=t(h,0))}function h(){for(f=null;s.length>0;)s.shift()(s.shift())}return e};function o(e){throw e}function i(){}}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(o){"use strict";void 0===(n=function(){return{formatError:function(t){var r="object"==typeof t&&null!==t&&(t.stack||t.message)?t.stack||t.message:e(t);return t instanceof Error?r:r+" (WARNING: non-Error used)"},formatObject:e,tryStringify:t};function e(e){var r=String(e);return"[object Object]"===r&&"undefined"!=typeof JSON&&(r=t(e,r)),r}function t(e,t){try{return JSON.stringify(e)}catch(e){return t}}}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(o){"use strict";void 0===(n=function(e){return r(36)({scheduler:new(r(37))(r(9).asap)})}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){(function(n){var o;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(i){"use strict";void 0===(o=function(){return function(e){var t=e.scheduler,r=function(){if(null!=n&&"function"==typeof n.emit)return function(e,t){return"unhandledRejection"===e?n.emit(e,t.value,t):n.emit(e,t)};if("undefined"!=typeof self&&function(){if("function"==typeof CustomEvent)try{return new CustomEvent("unhandledRejection")instanceof CustomEvent}catch(e){}return!1}())return function(e,t){return function(r,n){var o=new t(r,{detail:{reason:n.value,key:n},bubbles:!1,cancelable:!0});return!e.dispatchEvent(o)}}(self,CustomEvent);if("undefined"!=typeof self&&function(){if("undefined"!=typeof document&&"function"==typeof document.createEvent)try{return document.createEvent("CustomEvent").initCustomEvent("eventType",!1,!0,{}),!0}catch(e){}return!1}())return function(e,t){return function(r,n){var o=t.createEvent("CustomEvent");return o.initCustomEvent(r,!1,!0,{reason:n.value,key:n}),!e.dispatchEvent(o)}}(self,document);return U}(),o=Object.create||function(e){function t(){}return t.prototype=e,new t};function i(e,t){this._handler=e===m?t:function(e){var t=new g;try{e((function(e){t.resolve(e)}),r,(function(e){t.notify(e)}))}catch(e){r(e)}return t;function r(e){t.reject(e)}}(e)}function u(e){return T(e)?e:new i(m,new b(d(e)))}function a(e){return new i(m,new b(new x(e)))}function s(){return E}function c(e,t,r){for(var n,o="function"==typeof t?function(n,o,i){i.resolved||f(r,l,n,e(t,o,n),i)}:l,u=new g,a=r.length>>>0,s=new Array(a),c=0;c<r.length&&!u.resolved;++c)void 0!==(n=r[c])||c in r?f(r,o,c,n,u):--a;return 0===a&&u.become(new C(s)),new i(m,u);function l(e,t,r){s[e]=t,0==--a&&r.become(new C(s))}}function f(e,t,r,n,o){if(P(n)){var i=function(e){return T(e)?e._handler.join():h(e)}(n),u=i.state();0===u?i.fold(t,r,void 0,o):u>0?t(r,i.value,o):(o.become(i),l(e,r+1,i))}else t(r,n,o)}function l(e,t,r){for(var n=t;n<e.length;++n)p(d(e[n]),r)}function p(e,t){if(e!==t){var r=e.state();0===r?e.visit(e,void 0,e._unreport):r<0&&e._unreport()}}function d(e){return T(e)?e._handler.join():P(e)?h(e):new C(e)}function h(e){try{var t=e.then;return"function"==typeof t?new w(t,e):new C(e)}catch(e){return new x(e)}}function m(){}function v(){}i.resolve=u,i.reject=a,i.never=s,i._defer=function(){return new i(m,new g)},i._handler=d,i.prototype.then=function(e,t,r){var n=this._handler,o=n.join().state();if("function"!=typeof e&&o>0||"function"!=typeof t&&o<0)return new this.constructor(m,n);var i=this._beget(),u=i._handler;return n.chain(u,n.receiver,e,t,r),i},i.prototype.catch=function(e){return this.then(void 0,e)},i.prototype._beget=function(){return function(e,t){var r=new g(e.receiver,e.join().context);return new t(m,r)}(this._handler,this.constructor)},i.all=function(e){return c(N,null,e)},i.race=function(e){if("object"!=typeof e||null===e)return a(new TypeError("non-iterable passed to race()"));return 0===e.length?s():1===e.length?u(e[0]):function(e){var t,r,n,o=new g;for(t=0;t<e.length;++t)if(void 0!==(r=e[t])||t in e){if(0!==(n=d(r)).state()){o.become(n),l(e,t+1,n);break}n.visit(o,o.resolve,o.reject)}return new i(m,o)}(e)},i._traverse=function(e,t){return c(L,e,t)},i._visitRemaining=l,m.prototype.when=m.prototype.become=m.prototype.notify=m.prototype.fail=m.prototype._unreport=m.prototype._report=U,m.prototype._state=0,m.prototype.state=function(){return this._state},m.prototype.join=function(){for(var e=this;void 0!==e.handler;)e=e.handler;return e},m.prototype.chain=function(e,t,r,n,o){this.when({resolver:e,receiver:t,fulfilled:r,rejected:n,progress:o})},m.prototype.visit=function(e,t,r,n){this.chain(y,e,t,r,n)},m.prototype.fold=function(e,t,r,n){this.when(new R(e,t,r,n))},A(m,v),v.prototype.become=function(e){e.fail()};var y=new v;function g(e,t){i.createContext(this,t),this.consumers=void 0,this.receiver=e,this.handler=void 0,this.resolved=!1}function b(e){this.handler=e}function w(e,r){g.call(this),t.enqueue(new _(e,r,this))}function C(e){i.createContext(this),this.value=e}A(m,g),g.prototype._state=0,g.prototype.resolve=function(e){this.become(d(e))},g.prototype.reject=function(e){this.resolved||this.become(new x(e))},g.prototype.join=function(){if(!this.resolved)return this;for(var e=this;void 0!==e.handler;)if((e=e.handler)===this)return this.handler=new x(new TypeError("Promise cycle"));return e},g.prototype.run=function(){var e=this.consumers,t=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var r=0;r<e.length;++r)t.when(e[r])},g.prototype.become=function(e){this.resolved||(this.resolved=!0,this.handler=e,void 0!==this.consumers&&t.enqueue(this),void 0!==this.context&&e._report(this.context))},g.prototype.when=function(e){this.resolved?t.enqueue(new k(e,this.handler)):void 0===this.consumers?this.consumers=[e]:this.consumers.push(e)},g.prototype.notify=function(e){this.resolved||t.enqueue(new O(e,this))},g.prototype.fail=function(e){var t=void 0===e?this.context:e;this.resolved&&this.handler.join().fail(t)},g.prototype._report=function(e){this.resolved&&this.handler.join()._report(e)},g.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},A(m,b),b.prototype.when=function(e){t.enqueue(new k(e,this))},b.prototype._report=function(e){this.join()._report(e)},b.prototype._unreport=function(){this.join()._unreport()},A(g,w),A(m,C),C.prototype._state=1,C.prototype.fold=function(e,t,r,n){!function(e,t,r,n,o){if("function"!=typeof e)return o.become(r);i.enterContext(r),function(e,t,r,n,o){try{e.call(n,t,r,o)}catch(e){o.become(new x(e))}}(e,t,r.value,n,o),i.exitContext()}(e,t,this,r,n)},C.prototype.when=function(e){I(e.fulfilled,this,e.receiver,e.resolver)};var F=0;function x(e){i.createContext(this),this.id=++F,this.value=e,this.handled=!1,this.reported=!1,this._report()}function j(e,t){this.rejection=e,this.context=t}function S(e){this.rejection=e}A(m,x),x.prototype._state=-1,x.prototype.fold=function(e,t,r,n){n.become(this)},x.prototype.when=function(e){"function"==typeof e.rejected&&this._unreport(),I(e.rejected,this,e.receiver,e.resolver)},x.prototype._report=function(e){t.afterQueue(new j(this,e))},x.prototype._unreport=function(){this.handled||(this.handled=!0,t.afterQueue(new S(this)))},x.prototype.fail=function(e){this.reported=!0,r("unhandledRejection",this),i.onFatalRejection(this,void 0===e?this.context:e)},j.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,r("unhandledRejection",this.rejection)||i.onPotentiallyUnhandledRejection(this.rejection,this.context))},S.prototype.run=function(){this.rejection.reported&&(r("rejectionHandled",this.rejection)||i.onPotentiallyUnhandledRejectionHandled(this.rejection))},i.createContext=i.enterContext=i.exitContext=i.onPotentiallyUnhandledRejection=i.onPotentiallyUnhandledRejectionHandled=i.onFatalRejection=U;var M=new m,E=new i(m,M);function k(e,t){this.continuation=e,this.handler=t}function O(e,t){this.handler=t,this.value=e}function _(e,t,r){this._then=e,this.thenable=t,this.resolver=r}function R(e,t,r,n){this.f=e,this.z=t,this.c=r,this.to=n,this.resolver=y,this.receiver=this}function T(e){return e instanceof i}function P(e){return("object"==typeof e||"function"==typeof e)&&null!==e}function I(e,t,r,n){if("function"!=typeof e)return n.become(t);i.enterContext(t),function(e,t,r,n){try{n.become(d(e.call(r,t)))}catch(e){n.become(new x(e))}}(e,t.value,r,n),i.exitContext()}function D(e,t,r,n,o){if("function"!=typeof e)return o.notify(t);i.enterContext(r),function(e,t,r,n){try{n.notify(e.call(r,t))}catch(e){n.notify(e)}}(e,t,n,o),i.exitContext()}function L(e,t,r){try{return e(t,r)}catch(e){return a(e)}}function A(e,t){t.prototype=o(e.prototype),t.prototype.constructor=t}function N(e,t){return t}function U(){}return k.prototype.run=function(){this.handler.join().when(this.continuation)},O.prototype.run=function(){var e=this.handler.consumers;if(void 0!==e)for(var t,r=0;r<e.length;++r)D((t=e[r]).progress,this.value,this.handler,t.receiver,t.resolver)},_.prototype.run=function(){var e=this.resolver;!function(e,t,r,n,o){try{e.call(t,r,n,o)}catch(e){n(e)}}(this._then,this.thenable,(function(t){e.resolve(t)}),(function(t){e.reject(t)}),(function(t){e.notify(t)}))},R.prototype.fulfilled=function(e){this.f.call(this.c,this.z,e,this.to)},R.prototype.rejected=function(e){this.to.reject(e)},R.prototype.progress=function(e){this.to.notify(e)},i}}.call(t,r,t,e))||(e.exports=o)}(r(2))}).call(this,r(12))},function(e,t,r){var n;/** @license MIT License (c) copyright 2010-2014 original author or authors */!function(o){"use strict";void 0===(n=function(){function e(e){this._async=e,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var t=this;this.drain=function(){t._drain()}}return e.prototype.enqueue=function(e){this._queue[this._queueLen++]=e,this.run()},e.prototype.afterQueue=function(e){this._afterQueue[this._afterQueueLen++]=e,this.run()},e.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},e.prototype._drain=function(){for(var e=0;e<this._queueLen;++e)this._queue[e].run(),this._queue[e]=void 0;for(this._queueLen=0,this._running=!1,e=0;e<this._afterQueueLen;++e)this._afterQueue[e].run(),this._afterQueue[e]=void 0;this._afterQueueLen=0},e}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;
/*
 * Copyright 2013 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */!function(o){"use strict";void 0===(n=function(e){var t,n,o;return t=r(4),n=r(6),o=function(){function e(e,t,r){(e in t||e in r)&&(t[e]=n({},r[e],t[e]))}function t(e,t,r){e in r&&!(e in t)&&(t[e]=r[e])}var r={method:t,path:t,params:e,headers:e,entity:t,mixin:e};return function(e,t){for(var n in r)r[n](n,e,t);return e}}(),t({request:function(e,t){return o(e,t)}})}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;
/*
 * Copyright 2012-2014 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */!function(o){"use strict";void 0===(n=function(e){var t,n,o,i,u;return t=r(4),n=r(18),o=r(19),u=r(3),i={read:function(e){return e},write:function(e){return e}},t({init:function(e){return e.registry=e.registry||o,e},request:function(e,t){var r,o;return o=e.headers||(e.headers={}),r=n.parse(o["Content-Type"]=o["Content-Type"]||t.mime||"text/plain"),o.Accept=o.Accept||t.accept||r.raw+", application/json;q=0.8, text/plain;q=0.5, */*;q=0.2","entity"in e?t.registry.lookup(r).otherwise((function(){if(t.permissive)return i;throw"mime-unknown"})).then((function(n){var o=t.client||e.originator;return u.attempt(n.write,e.entity,{client:o,request:e,mime:r,registry:t.registry}).otherwise((function(){throw"mime-serialization"})).then((function(t){return e.entity=t,e}))})):e},response:function(e,t){if(!(e.headers&&e.headers["Content-Type"]&&e.entity))return e;var r=n.parse(e.headers["Content-Type"]);return t.registry.lookup(r).otherwise((function(){return i})).then((function(n){var o=t.client||e.request&&e.request.originator;return u.attempt(n.read,e.entity,{client:o,response:e,mime:r,registry:t.registry}).otherwise((function(t){throw e.error="mime-deserialization",e.cause=t,e})).then((function(t){return e.entity=t,e}))}))}})}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;
/*
 * Copyright 2013-2015 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */!function(o){"use strict";void 0===(n=function(e){var t,n,o,i,u,a;function s(e,t,r){Object.defineProperty(e,t,{value:r,configurable:!0,enumerable:!1,writeable:!0})}return t=r(41),n=r(42),o=r(45),i=r(46),u=r(10),a=r(3),{read:function(e,r){var c,f;function l(e,t){(t&&f&&f.warn||f.log)&&(f.warn||f.log).call(f,"Relationship '"+e+"' is deprecated, see "+t)}return c=(r=r||{}).client,f=r.console||f,r.registry.lookup(r.mime.suffix).then((function(f){return a(f.read(e,r)).then((function(e){return o.findProperties(e,"_embedded",(function(e,t,r){Object.keys(e).forEach((function(r){if(!(r in t)){var n=u({entity:e[r]});s(t,r,n)}})),s(t,r,e)})),o.findProperties(e,"_links",(function(e,r,o){Object.keys(e).forEach((function(t){var o=e[t];t in r||s(r,t,u.make(i((function(){return o.deprecation&&l(t,o.deprecation),!0===o.templated?n(c)({path:o.href}):c({path:o.href})}))))})),s(r,o,e),s(r,"clientFor",(function(r,o){var i=e[r];if(!i)throw new Error("Unknown relationship: "+r);return i.deprecation&&l(r,i.deprecation),!0===i.templated?n(o||c,{template:i.href}):t(o||c,{prefix:i.href})})),s(r,"requestFor",(function(e,t,r){return this.clientFor(e,r)(t)}))})),e}))}))},write:function(e,t){return t.registry.lookup(t.mime.suffix).then((function(r){return r.write(e,t)}))}}}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;
/*
 * Copyright 2012-2013 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */!function(o){"use strict";void 0===(n=function(e){var t,n;return t=r(4),n=r(16),t({request:function(e,t){var r,o,i;return t.prefix&&!new n(e.path).isFullyQualified()&&(r=t.prefix,e.path&&(i="/",(o=r).lastIndexOf(i)+i.length===o.length||function(e,t){return 0===e.indexOf(t)}(e.path,"/")||(r+="/"),r+=e.path),e.path=r),e}})}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;
/*
 * Copyright 2015 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */!function(o){"use strict";void 0===(n=function(e){var t,n,o;return t=r(4),n=r(43),o=r(6),t({init:function(e){return e.params=e.params||{},e.template=e.template||"",e},request:function(e,t){var r,i;return r=e.path||t.template,i=o({},e.params,t.params),e.path=n.expand(r,i),delete e.params,e}})}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;
/*
 * Copyright 2015 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */!function(o){"use strict";void 0===(n=function(e){var t,n,o;function i(e,r){var i;if((i=n[e.slice(0,1)])?e=e.slice(1):i=n[""],i.reserved)throw new Error("Reserved expression operations are not supported");return function(e,r,n){return r.split(",").reduce((function(r,i){var u,a;if(u={},"*"===i.slice(-1)&&(i=i.slice(0,-1),u.explode=!0),o.test(i)){var s=o.exec(i);i=s[1],u.maxLength=parseInt(s[2])}return i=t.decode(i),null==(a=n[i])||(Array.isArray(a)?r+=a.reduce((function(t,r){return t.length?(t+=u.explode?e.separator:",",e.named&&u.explode&&(t+=e.encoder(i),t+=r.length?"=":e.empty)):(t+=e.first,e.named&&(t+=e.encoder(i),t+=r.length?"=":e.empty)),t+=e.encoder(r)}),""):"object"==typeof a?r+=Object.keys(a).reduce((function(t,r){return t.length?t+=u.explode?e.separator:",":(t+=e.first,e.named&&!u.explode&&(t+=e.encoder(i),t+=a[r].length?"=":e.empty)),t+=e.encoder(r),t+=u.explode?"=":",",t+=e.encoder(a[r])}),""):(a=String(a),u.maxLength&&(a=a.slice(0,u.maxLength)),r+=r.length?e.separator:e.first,e.named&&(r+=e.encoder(i),r+=a.length?"=":e.empty),r+=e.encoder(a))),r}),"")}(i,e,r)}return t=r(44),o=/^([^:]*):([0-9]+)$/,n={"":{first:"",separator:",",named:!1,empty:"",encoder:t.encode},"+":{first:"",separator:",",named:!1,empty:"",encoder:t.encodeURL},"#":{first:"#",separator:",",named:!1,empty:"",encoder:t.encodeURL},".":{first:".",separator:".",named:!1,empty:"",encoder:t.encode},"/":{first:"/",separator:"/",named:!1,empty:"",encoder:t.encode},";":{first:";",separator:";",named:!0,empty:"",encoder:t.encode},"?":{first:"?",separator:"&",named:!0,empty:"=",encoder:t.encode},"&":{first:"&",separator:"&",named:!0,empty:"=",encoder:t.encode},"=":{reserved:!0},",":{reserved:!0},"!":{reserved:!0},"@":{reserved:!0},"|":{reserved:!0}},{expand:function(e,t){var r,n,o;for(o="",n=0;;){if(-1===(r=e.indexOf("{",n))){o+=e.slice(n);break}o+=e.slice(n,r),n=e.indexOf("}",r)+1,o+=i(e.slice(r+1,n-1),t)}return o}}}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;
/*
 * Copyright 2015 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */!function(o){"use strict";void 0===(n=function(){var e,t;function r(t){return t=t||e.unreserved,function(e){return function(e,t){if("string"!=typeof e)throw new Error("String required for URL encoding");return e.split("").map((function(e){if(t.hasOwnProperty(e))return e;var r=e.charCodeAt(0);if(r<=127){var n=r.toString(16).toUpperCase();return"%"+(n.length%2==1?"0":"")+n}return encodeURIComponent(e).toUpperCase()})).join("")}(e,t)}}return(t={alpha:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",digit:"0123456789",genDelims:":/?#[]@",subDelims:"!$&'()*+,;="}).reserved=t.genDelims+t.subDelims,t.unreserved=t.alpha+t.digit+"-._~",t.url=t.reserved+t.unreserved,t.scheme=t.alpha+t.digit+"+-.",t.userinfo=t.unreserved+t.subDelims+":",t.host=t.unreserved+t.subDelims,t.port=t.digit,t.pchar=t.unreserved+t.subDelims+":@",t.segment=t.pchar,t.path=t.segment+"/",t.query=t.pchar+"/?",t.fragment=t.pchar+"/?",e=Object.keys(t).reduce((function(e,r){return e[r]=t[r].split("").reduce((function(e,t){return e[t]=!0,e}),{}),e}),{}),{decode:function(e){return decodeURIComponent(e)},encode:r(),encodeURL:r(e.url),encodeScheme:r(e.scheme),encodeUserInfo:r(e.userinfo),encodeHost:r(e.host),encodePort:r(e.port),encodePathSegment:r(e.segment),encodePath:r(e.path),encodeQuery:r(e.query),encodeFragment:r(e.fragment)}}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;
/*
 * Copyright 2013 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */!function(o){"use strict";void 0===(n=function(){return{findProperties:function e(t,r,n){"object"==typeof t&&null!==t&&(r in t&&n(t[r],t,r),Object.keys(t).forEach((function(o){e(t[o],r,n)})))}}}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;
/*
 * Copyright 2013 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */!function(o){"use strict";void 0===(n=function(e){var t;return t=r(3),function(e){var r,n,o,i,u;return r=t.defer(),n=!1,o=r.resolver,i=r.promise,u=i.then,i.then=function(){return n||(n=!0,t.attempt(e).then(o.resolve,o.reject)),u.apply(i,arguments)},i}}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;
/*
 * Copyright 2012 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */!function(o){"use strict";void 0===(n=function(){var e,t;function r(t){return(t=encodeURIComponent(t)).replace(e,"+")}function n(e){return e=e.replace(t," "),decodeURIComponent(e)}return e=/%20/g,t=/\+/g,{read:function(e){var t={};return e.split("&").forEach((function(e){var r,o,i;o=n((r=e.split("="))[0]),i=2===r.length?n(r[1]):null,o in t?(Array.isArray(t[o])||(t[o]=[t[o]]),t[o].push(i)):t[o]=i})),t},write:function(e){var t="";return Object.keys(e).forEach((function(n){t=function e(t,n,o){return Array.isArray(o)?o.forEach((function(r){t=e(t,n,r)})):(t.length>0&&(t+="&"),t+=r(n),null!=o&&(t+="="+r(o))),t}(t,n,e[n])})),t}}}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;
/*
 * Copyright 2014 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Michael Jackson
 */!function(o){"use strict";void 0===(n=function(){return{write:function(e){if("undefined"==typeof FormData)throw new Error("The multipart/form-data mime serializer requires FormData support");if(e instanceof FormData)return e;if(function(e){return e&&1===e.nodeType&&"FORM"===e.tagName}(e))return new FormData(e);if("object"==typeof e&&null!==e)return function(e){var t,r=new FormData;for(var n in e)e.hasOwnProperty(n)&&((t=e[n])instanceof File?r.append(n,t,t.name):t instanceof Blob?r.append(n,t):r.append(n,String(t)));return r}(e);throw new Error("Unable to create FormData from object "+e)}}}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;
/*
 * Copyright 2012 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */!function(o){"use strict";void 0===(n=function(){return{read:function(e){return e},write:function(e){return e.toString()}}}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;void 0===(n=function(e){"use strict";return r(4)({request:function(e){return-1===e.path.indexOf("{")||(e.path=e.path.split("{")[0]),e}})}.call(t,r,t,e))||(e.exports=n)},function(e,t,r){var n;
/*
 * Copyright 2012-2013 the original author or authors
 * @license MIT, see LICENSE.txt for details
 *
 * @author Scott Andrews
 */!function(o){"use strict";void 0===(n=function(e){var t,n;return t=r(4),n=r(3),t({init:function(e){return e.code=e.code||400,e},response:function(e,t){return e.status&&e.status.code>=t.code?n.reject(e):e}})}.call(t,r,t,e))||(e.exports=n)}(r(2))},function(e,t,r){var n;void 0===(n=function(){"use strict";return{read:function(e){return e.split("\n")},write:function(e){return e instanceof Array?e.map((function(e){return e._links.self.href})).join("\n"):e._links.self.href}}}.call(t,r,t,e))||(e.exports=n)},function(e,t,r){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>"%"+e.charCodeAt(0).toString(16).toUpperCase())},function(e,t,r){"use strict";var n=new RegExp("%[a-f0-9]{2}","gi"),o=new RegExp("(%[a-f0-9]{2})+","gi");function i(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],i(r),i(n))}function u(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(n),r=1;r<t.length;r++)t=(e=i(t,r).join("")).match(n);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"","%FF%FE":""},r=o.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var n=u(r[0]);n!==r[0]&&(t[r[0]]=n)}r=o.exec(e)}t["%C2"]="";for(var i=Object.keys(t),a=0;a<i.length;a++){var s=i[a];e=e.replace(new RegExp(s,"g"),t[s])}return e}(e)}}},function(e,t,r){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const r=e.indexOf(t);return-1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]}},function(e,t,r){"use strict";r.r(t);var n=r(1),o=r.n(n),i=(r(5),r(7)),u=r.n(i),a=r(21),s=r.n(a),c={requireValue:function(e,t){if(null==t)throw c.notFound(e);return t},notFound:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"property";return{name:"NotFound",message:"Required "+e+" not found"}}},f=c,l=r(0),p=r.n(l);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return u=e.done,e},e:function(e){a=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(a)throw i}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v={getSearchProperty:function(e){var t;return e.search&&(t=0===e.search.indexOf("?")?e.search.substring(1,e.search.length):e.search),t},addSearchPropertyIfPresent:function(e,t){var r=v.getSearchProperty(e);if(r){var n=-1===t.indexOf("?")?"?":"&",o=t+n+r;return p.a.debug("Form#addReturnToIfPresent Added `return_to` to path. Updated:\nfrom: "+t+"\n  To: "+o),o}return t},addReturnToIfSpecified:function(e,t){if(!0===e.returnHere||"true"===e.returnHere){var r=-1===t.indexOf("?")?"?":"&",n=t+r+"targetOnCompletion="+window.location.pathname;return p.a.debug("FormUtil#addReturnToIfSpecified Added `return_to` to path. Updated:\nfrom: "+t+"\n  To: "+n),n}return t},basepath:function(e){return e.basepath?e.basepath:""},apibasepath:function(e){return e.apibasepath?e.apibasepath:""},hasMatchingFormId:function(e,t){var r=!1;if(null!=t&&null!=e){var n=t.indexOf("?");if(-1!==n){var o=t.length,i=t.substring(n,o);s.a.parse(i).fid===e.fid&&(r=!0)}}return r},buildPath:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=f.requireValue("FormUtil#buildPath(basepath,",e),o=h(r);try{for(o.s();!(t=o.n()).done;){var i=t.value;null!=i&&(n=n+"/"+i)}}catch(e){o.e(e)}finally{o.f()}return p.a.trace("FormUtil#buildPath Output: "+n),n},buildPathFor:function(e,t,r){var n=t?t.action:e.action,o=t?t.modelname:e.modelname,i=t?t.id:e.id;if(i||(i=t?t.mid:e.mid),i)if(r){var u=-1===r.indexOf("?")?"?":"&";r=r+u+"id="+i,i=null}else i="?id="+i;var a=[n,o,i,r],s=v.apibasepath(e),c=v.buildPath(s,a);return p.a.trace("FormUtil#buildPathFor Output: "+c),c},updateMultiChoice:function(e,t,r){p.a.trace((function(){return"Updating Form."+t.name+" with: "+p.a.toMessage(r)}));var n=e.form.members.map((function(e,t){var n=function(t){var n=e.name;if(n===t){var o=r[t];p.a.trace((function(){return"Updating FormMember: "+n+" with choices: "+p.a.toMessage(o)})),e.multiChoice=!0,e.choices=o,p.a.trace("FormMember Update: ",e)}};for(var o in r)n(o);return e}));p.a.trace("FormMembers update: ",n);var o=Object.assign({},e.form);o.members=n;var i=Object.assign({},e);return i.form=o,i},updateObject:function(e,t){var r={};for(var n in t){var o=e[n],i=t[n],u=void 0;if(i)if("object"===d(i)){var a=o?Object.assign({},o):{};u=Object.assign(a,i)}else u=i;p.a.log("trace","formUtil#updateObject "+n+" = \nCurrent: "+p.a.toMessage(o)+"\nUpdated: "+p.a.toMessage(u)),r[n]=u}return r},updateValue:function(e,t,r){null!==r[e]&&void 0!==r[e]&&(t[e]=r[e])},collectFormData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.form.members;return r.forEach((function(e,r){var n=e.value;null!=n&&(t[e.name]=e.value)})),p.a.trace("FormUtil#collectFormData ",t),t},collectConfigData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v.updateValue("parentfid",t,e),v.updateValue("fid",t,e),v.updateValue("id",t,e),v.updateValue("targetOnCompletion",t,e),v.updateValue("modelfields",t,e),v.updateValue("uploadedFiles",t,e),p.a.trace("formUtil#collectConfigData. ",t),t},getIdForFormFieldAdvice:function(e){return e.id+"-advice"},getIdForFormFieldMessage:function(e){return e.id+"-message"},getIdForSelectOptionAt:function(e,t){return f.requireValue("formMember",e),f.requireValue("index",t),e.id+"-"+t},getIdForDefaultSelectOption:function(e){return f.requireValue("formMember",e),e.id+"-no-selection"},logFormConfig:function(e,t,r){var n=null===e?null:e.form;null!==n&&v.logForm(n,t,r)},logForm:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"trace";p.a.log(r,(function(){return"formUtil->"+t+"-> Form. name: "+(e?e.name:null)+", members: "+(e?e.memberNames:null)}))},logResponse:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"trace";p.a.log(r,(function(){return"formUtil->"+t+"-> Response.headers: "+(e?p.a.toMessage(e.headers):null)}))},logEvent:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"trace";p.a.log(r,(function(){return"formUtil->"+t+"-> Event.target: "+e.target.name+"="+e.target.value}))}},y=v;function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C(e,t,r){return t&&w(e.prototype,t),r&&w(e,r),e}function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=M(e);if(t){var o=M(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return S(this,r)}}function S(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(e){F(r,e);var t=j(r);function r(){return b(this,r),t.apply(this,arguments)}return C(r,[{key:"headingHtm",value:function(){return o.a.createElement("span",{className:"nowrap"},o.a.createElement("label",{className:"nowrap",htmlFor:this.props.formMember.id},this.props.formMember.label),this.props.formMember.required&&o.a.createElement("font",{className:"red heavy-max"}," * "),o.a.createElement(k,{formMember:this.props.formMember}))}},{key:"render",value:function(){return"hidden"!==this.props.formMember.type?this.headingHtm():null}}]),r}(o.a.Component),k=function(e){F(r,e);var t=j(r);function r(){return b(this,r),t.apply(this,arguments)}return C(r,[{key:"render",value:function(){var e=y.getIdForFormFieldAdvice(this.props.formMember);return this.props.formMember.advice?o.a.createElement("span",{className:"form-field-advice",id:e},"(",this.props.formMember.advice,")"):o.a.createElement("span",{className:"form-field-advice",id:e})}}]),r}(o.a.Component),O=E;var _={getDataType:function(e,t){var r,n=e.dataType;if(p.a.trace("FormMemberUtil#getDataType dataType: "+n),null!=n){(function(e){throw new Error('"'+e+'" is read-only')})("dataType");var o=(n=n.toString()).lastIndexOf(".");-1!==o&&(r=n.substring(o+1,n.length))}var i=r||t;return i&&(i=i.toString()),i},addNewlyCreated:function(e,t){var r=_.addNewlyCreatedUsingResponseEntity(e,t);return null==r&&(r=_.addNewlyCreatedUsingResponseHeaders(e,t)),null!=r&&p.a.debug((function(){return"FormMemberUtil#addNewlyCreated set "+t.form.name+"#"+r.name+" = "+r.value})),r},addNewlyCreatedUsingResponseEntity:function(e,t){var r,n=e.entity;if(n&&n.form&&n.form.dataSource&&n.form.dataSource.id){var o=n.modelname;t.form.members.forEach((function(e,t){e.name===o&&(e.value=n.form.dataSource.id,r=e)}))}return r},addNewlyCreatedUsingResponseHeaders:function(e,t){var r;if(p.a.trace("FormMemberUtil#addNewlyCreated ",e.entity),e.entity&&t.form.members){var n=e.headers.Location;p.a.trace("FormMemberUtil#addNewlyCreated Response.headers.Location: ",n),n&&t.form.members.forEach((function(e,t){for(var o=-1,i=0,u=[e.name,e.name.toLowerCase()];i<u.length;i++){if(tgt="/"+u[i]+"/",-1!==(o=n.indexOf(tgt)))break}if(-1!==o){var a=n.substring(o+tgt.length,n.length),s=parseInt(a,10);e.value=s,r=e}}))}return r},getValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.value?e.value:t},getSize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:35;return _.getNumberProperty(e,"size",t)},getMaxLength:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return _.getNumberProperty(e,"maxlength",t)},getNumberProperty:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:35,n=e[t];return n?"number"==typeof n?n:parseInt(n.toString(),10):r},isChecked:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return _.getBooleanProperty(e,"checked",t)},getBooleanProperty:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e[t];return n?"boolean"==typeof n?n:"true"===n:r}},R=_;function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e,t,r){return t&&I(e.prototype,t),r&&I(e,r),e}function L(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=q(e);if(t){var o=q(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return U(this,r)}}function U(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var B="form-input",V="form-select",H="form-textarea",z=function(e){L(r,e);var t=N(r);function r(e){var n;return P(this,r),n=t.call(this,e),p.a.trace("Formfields.InputField#<init>. Props: ",e),n}return D(r,[{key:"render",value:function(){var e=this,t=B;return o.a.createElement("input",{className:t+" "+this.props.formMember.type,type:this.props.formMember.type,disabled:this.props.disabled,required:this.props.formMember.required,form:this.props.formid,id:this.props.formMember.id,ref:this.props.formMember.id,name:this.props.formMember.name,value:R.getValue(this.props),placeholder:this.props.formMember.label,onChange:function(t){return e.props.onChange(e.props.formMember,t)},onClick:function(t){return e.props.onClick(e.props.formMember,t)},onBlur:function(t){return e.props.onBlur(e.props.formMember,t)},size:R.getSize(this.props.formMember),maxLength:R.getMaxLength(this.props.formMember)})}}]),r}(o.a.Component),Q=function(e){L(r,e);var t=N(r);function r(){return P(this,r),t.apply(this,arguments)}return D(r,[{key:"listItemAt",value:function(e){var t=this.props.formMember.choices,r=e,n=t[r],i=r===this.props.value||n===this.props.value;p.a.trace((function(){return"SelectField#listItemAt. "+r+" = "+n+", selected: "+i}));var u=y.getIdForSelectOptionAt(this.props.formMember,r),a=o.a.createElement("option",{ref:u,id:u,key:u,disabled:this.props.disabled,name:this.props.formMember.name,value:r},n);return p.a.trace("SelectField#listItemAt. ",a),a}},{key:"render",value:function(){var e=this,t=this.props.formMember.choices,r=Object.keys(t).length;p.a.trace("SelectField#render. Choices: ",t),p.a.trace("SelectField#render. Choices: ",r);var n=[];for(var i in t){var u=this.listItemAt(i);n.push(u)}var a=V,s=y.getIdForDefaultSelectOption(this.props.formMember);return o.a.createElement("select",{className:a+" "+this.props.formMember.type,disabled:this.props.disabled,required:this.props.formMember.required,form:this.props.formid,name:this.props.formMember.name,id:this.props.formMember.id,ref:this.props.formMember.id,value:R.getValue(this.props),placeholder:this.props.formMember.label,onChange:function(t){return e.props.onChange(e.props.formMember,t)},onClick:function(t){return e.props.onClick(e.props.formMember,t)},onBlur:function(t){return e.props.onBlur(e.props.formMember,t)}},o.a.createElement("option",{ref:s,id:s},"Select ",this.props.formMember.label),n)}}]),r}(o.a.Component),G=function(e){L(r,e);var t=N(r);function r(){return P(this,r),t.apply(this,arguments)}return D(r,[{key:"render",value:function(){var e=this,t=B;return o.a.createElement("input",{className:t+" "+this.props.formMember.type,type:this.props.formMember.type,disabled:this.props.disabled,required:this.props.formMember.required,form:this.props.formid,id:this.props.formMember.id,ref:this.props.formMember.id,name:this.props.formMember.name,checked:R.isChecked(this.props),placeholder:this.props.formMember.label,onChange:function(t){return e.props.onChange(e.props.formMember,t)},onClick:function(t){return e.props.onClick(e.props.formMember,t)},onBlur:function(t){return e.props.onBlur(e.props.formMember,t)}})}}]),r}(o.a.Component),$=function(e){L(r,e);var t=N(r);function r(){return P(this,r),t.apply(this,arguments)}return D(r,[{key:"render",value:function(){var e=this,t=B;return o.a.createElement("input",{className:t+" "+this.props.formMember.type,type:this.props.disabled?"text":"file",disabled:this.props.disabled,required:this.props.formMember.required,form:this.props.formid,id:this.props.formMember.id,ref:this.props.formMember.id,name:this.props.formMember.name,value:R.getValue(this.props),placeholder:this.props.formMember.label,onChange:function(t){return e.props.onChange(e.props.formMember,t)},onClick:function(t){return e.props.onClick(e.props.formMember,t)},onBlur:function(t){return e.props.onBlur(e.props.formMember,t)},size:R.getSize(this.props.formMember),maxLength:R.getMaxLength(this.props.formMember)})}}]),r}(o.a.Component),W=function(e){L(r,e);var t=N(r);function r(){return P(this,r),t.apply(this,arguments)}return D(r,[{key:"render",value:function(){var e=this,t=H,r=this.props.formMember.numberOfLines,n=r>5?5:r;return o.a.createElement("textarea",{className:t+" "+this.props.formMember.type,rows:n,disabled:this.props.disabled,required:this.props.formMember.required,form:this.props.formid,id:this.props.formMember.id,ref:this.props.formMember.id,name:this.props.formMember.name,value:R.getValue(this.props),placeholder:this.props.formMember.label,onChange:function(t){return e.props.onChange(e.props.formMember,t)},onClick:function(t){return e.props.onClick(e.props.formMember,t)},onBlur:function(t){return e.props.onBlur(e.props.formMember,t)}})}}]),r}(o.a.Component),J={isMultiChoice:function(e){var t=e.formMember.multiChoice;return!0===t||"true"===t},getLink:function(e){var t=e.formMember.referencedFormHref,r=window.location.pathname+"?fid="+e.form.id,n="?parentfid="+e.form.id+"&targetOnCompletion="+r,o=y.apibasepath(e);p.a.trace("ReferencedFormConfig#getLink apibasepath: "+o);var i=null==t?null:y.buildPath(o,[e.action,e.formMember.name,n]);return p.a.trace("ReferencedFormConfig#getLink: ",i),i},buildBaseConfig:function(e){var t=J.getLink(e),r=null!=t,n=e.formMember.label,o=J.isMultiChoice(e),i=!0===o?"Select "+n+" or ":e.formMember.required?n+" is required. ":"",u=r?"Create one":"",a=!1===r||!0===o,s=e.formMember.value,c={displayField:a,displayLink:!0===r&&(!0===o||!1===(null!==s&&""!==s&&void 0!==s)),message:i,link:{href:t,text:u}};return p.a.trace("ReferencedFormConfig#getConfig: ",c),c},getConfig:function(e){var t,r=J.buildBaseConfig(e);return p.a.trace("ReferencedFormConfig#getConfig baseConfig: ",r),e.getReferencedFormConfig?t=e.getReferencedFormConfig(e.form,e.formMember,r):e.getReferencedFormMessage?(t=r).message=e.getReferencedFormMessage(e.form,e.formMember):t=r,p.a.trace("ReferencedFormConfig#getConfig output: ",t),t}},K=J;function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=re(e);if(t){var o=re(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return te(this,r)}}function te(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(u,e);var t,r,n,i=ee(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),t=i.call(this,e),p.a.trace("FormRow#<init>. Props: ",e),t.state={multiChoice:t.isMultiChoice()},t}return t=u,(r=[{key:"isMultiChoice",value:function(){var e=this.props.formMember.multiChoice;return!0===e||"true"===e}},{key:"isMultiChoicePropertyUpdated",value:function(){return!this.state.multiChoice&&this.isMultiChoice()}},{key:"shouldComponentUpdate",value:function(){return this.isMultiChoicePropertyUpdated(),!0}},{key:"getFormField",value:function(){return p.a.trace("FormRow#getFormField props.formMember: ",this.props.formMember),this.isMultiChoice()?o.a.createElement(Q,{formid:this.props.form.id,formMember:this.props.formMember,value:this.props.value,disabled:this.props.disabled,onChange:this.props.onChange,onClick:this.props.onClick,onBlur:this.props.onBlur}):"checkbox"===this.props.formMember.type?o.a.createElement(G,{formid:this.props.form.id,formMember:this.props.formMember,checked:this.props.value,disabled:this.props.disabled,onChange:this.props.onChange,onClick:this.props.onClick,onBlur:this.props.onBlur}):"file"===this.props.formMember.type?o.a.createElement($,{formid:this.props.form.id,formMember:this.props.formMember,value:this.props.value,disabled:this.props.disabled,onChange:this.props.onChange,onClick:this.props.onClick,onBlur:this.props.onBlur}):this.props.formMember.numberOfLines<2?o.a.createElement(z,{formid:this.props.form.id,formMember:this.props.formMember,value:this.props.value,disabled:this.props.disabled,onChange:this.props.onChange,onClick:this.props.onClick,onBlur:this.props.onBlur}):o.a.createElement(W,{formid:this.props.form.id,formMember:this.props.formMember,value:this.props.value,disabled:this.props.disabled,onChange:this.props.onChange,onClick:this.props.onClick,onBlur:this.props.onBlur})}},{key:"render",value:function(){var e=this,t=this.isMultiChoice(),r=this.props.formMember.choices;p.a.trace((function(){return"FormRow#render. Type: "+e.props.formMember.type+", MultiChoice: "+t+", Name: "+e.props.formMember.name+", Value: "+e.props.value+", choices: "+(r?Object.keys(r).length:null)}));var n=K.getConfig(this.props),i=y.getIdForFormFieldMessage(this.props.formMember),u=this.props.errors,a="object"===X(u)?Object.values(u):u,s=null!=a&&a.length>0,c=!1===s?null:a.map((function(e,t){if(e.fieldName){var r=i+"-"+t;return o.a.createElement("div",{key:r,id:r},"Invalid '"+e.fieldName+"': "+e.message)}return o.a.createElement("div",{key:id,id:id},"Error: "+e.message)}));return p.a.trace("FormRow#render has errors: "+s+", errors: ",c),o.a.createElement("div",{className:"form-row",key:"form-row-"+this.props.formMember.id},!0===s&&o.a.createElement("div",{className:"error-message",id:i},c),o.a.createElement(O,{formMember:this.props.formMember}),"checkbox"===this.props.formMember.type?" ":o.a.createElement("br",null),!0===n.displayField&&this.getFormField(),n.displayLink&&o.a.createElement("tt",null,n.message,o.a.createElement("a",{href:"#",target:"_blank",onClick:function(t){return e.props.onBeginReferencedForm(t,n.link.href)}},n.link.text)))}}])&&Y(t.prototype,r),n&&Y(t,n),u}(o.a.Component),oe={BEGIN:"begin",VALIDATE:"validate",SUBMIT:"submit",SubStage:{VALIDATE_SINGLE:"validateSingle",DEPENDENTS:"dependents"},first:function(){return oe.BEGIN},isFirst:function(e){return e===oe.first()},last:function(){return oe.SUBMIT},isLast:function(e){return e===oe.last()},next:function(e,t){return e===oe.BEGIN?!0===t||"true"===t?oe.SUBMIT:oe.VALIDATE:e===oe.VALIDATE?oe.SUBMIT:oe.BEGIN}},ie=oe,ue={newFormDataClientConfig:function(e,t){return{method:"POST",path:e,headers:{"Content-Type":"multipart/form-data"},entity:t}},pathSuffixForFormMember:function(e){return"onClick"===e?ie.SubStage.DEPENDENTS:"onBlur"===e?ie.SubStage.VALIDATE_SINGLE:e},forFormMember:function(e,t,r){var n=y.collectConfigData(e);return n.propertyName=t,n.propertyValue=r,n[t]=r,p.a.trace("FormDataBuilder#buildClientConfigForFormMember. data: ",n),n},buildHttpConfigForFormMember:function(e,t,r,n,o){var i=ue.pathSuffixForFormMember(t),u=y.buildPathFor(o,e,i);p.a.trace("FormDataBuilder#buildClientConfigForFormMember. POST ",u);var a=ue.forFormMember(e,r,n);return ue.newFormDataClientConfig(u,a)},forForm:function(e,t,r){y.logFormConfig(e,t);var n=y.collectConfigData(e);p.a.trace("FormDataBuilder#buildFormOutput. Values: ",r);var o=Object.assign(n,r);return p.a.trace("FormDataBuilder#buildFormOutput. Output: ",o),o},pathSuffixForForm:function(e,t){var r=ie.next(t);return p.a.trace((function(){return"FormDataBuilder#pathSuffixForForm. Current stage: "+t+", Next stage: "+r})),!0===e.express||"true"===e.express&&r===ie.VALIDATE?ie.VALIDATE+"/"+ie.SUBMIT:ie.isFirst(r)?null:r},buildHttpConfigForForm:function(e,t,r,n,o){var i=ue.pathSuffixForForm(o,n),u=y.buildPathFor(o,e,i);p.a.trace("FormDataBuilder#buildClientConfigForFormr. POST ",u);var a=ue.forForm(e,t,r);return ue.newFormDataClientConfig(u,a)}},ae=ue;function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(){return(ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pe(e,t,r){return t&&le(e.prototype,t),r&&le(e,r),e}function de(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ge(e);if(t){var o=ge(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ve(this,r)}}function ve(e,t){return!t||"object"!==se(t)&&"function"!=typeof t?ye(e):t}function ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var be=function(e){de(r,e);var t=me(r);function r(e){var n;return fe(this,r),n=t.call(this,e),p.a.debug("Form#<init>. Props: ",n.props),n.state=n.getInitialState(),n.onChange=n.onChange.bind(ye(n)),n.onClick=n.onClick.bind(ye(n)),n.onBlur=n.onBlur.bind(ye(n)),n.onSubmit=n.onSubmit.bind(ye(n)),n.onBeginReferencedForm=n.onBeginReferencedForm.bind(ye(n)),n}return pe(r,[{key:"getInitialState",value:function(){return{doneInitialLoadData:!1,context:{stage:ie.BEGIN},formConfig:null,pendingFormConfig:null,values:null,messages:{errors:null,infos:null}}}},{key:"updateStates",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];p.a.trace("Form#updateStates. Update: ",e),this.setState((function(r,n){return!0===t?e:y.updateObject(r,e)}))}},{key:"updateContext",value:function(e){this.updateStates({context:e})}},{key:"updateValues",value:function(e){this.updateStates({values:e})}},{key:"updateFormConfig",value:function(e){this.updateStates({formConfig:e})}},{key:"onError",value:function(e,t){y.logResponse(e,"Form#onError"),this.printMessages(e)}},{key:"printMessages",value:function(e){var t=e.entity.errors,r=e.entity.infos,n={errors:null,infos:null};t&&(p.a.debug("Errors: ",t),n.errors=t),r&&(p.a.trace("Infos: ",r),n.infos=r),null!=n&&this.updateStates({messages:n},!0)}},{key:"getRefreshedState",value:function(e,t,r){return r||(r={errors:null,infos:null}),{context:{stage:ie.BEGIN},formConfig:e,values:t,messages:r}}},{key:"onSuccessInitialLoad",value:function(e,t,r){y.logResponse(e,"Form#onSuccessInitialLoad");var n=e.entity;p.a.trace("Form#onSuccessInitialLoad ",n);var o=y.collectFormData(n),i=this.getRefreshedState(n,o,r);if(i.doneInitialLoadData=!0,this.props.onSuccessInitialLoad){var u=this.props.onSuccessInitialLoad(t,i);u&&(i=u)}this.updateStates(i)}},{key:"getRequest",value:function(e,t,r){var n=this;r||(r=function(t){return n.onError(t,e)});var o={method:"GET",path:e};p.a.debug("Form#getRequest, submitting: "+o.path),u()(o).done((function(r){p.a.trace("Form#getRequest success: "+e),t(r)}),(function(t){p.a.debug("Form#getRequest error: "+e),r(t)}))}},{key:"loadInitialData",value:function(e,t){var r=this;p.a.trace("Form#loadInitialData. GET ",e),this.getRequest(e,(function(n){return r.onSuccessInitialLoad(n,e,t)}),(function(t){return r.onError(t,e)}))}},{key:"buildDefaultPath",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.formConfig,t=y.buildPathFor(this.props,e);return t=y.addReturnToIfSpecified(this.props,t),t=y.addSearchPropertyIfPresent(this.props,t)}},{key:"loadInitialDataForConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.formConfig,t=arguments.length>1?arguments[1]:void 0,r=this.buildDefaultPath(e);this.loadInitialData(r,t)}},{key:"onBeginReferencedForm",value:function(e,t){e.preventDefault(),p.a.trace("Form#onBeginReferencedForm, path: ",t);this.updateStates({pendingFormConfig:this.state.formConfig},!0),this.loadInitialData(t)}},{key:"componentDidMount",value:function(){this.loadInitialDataForConfig()}},{key:"getEventTargetValue",value:function(e,t){var r=e.target;return"checkbox"===t.type||"radio"===t.type?r.checked:r.value}},{key:"handleEvent",value:function(e,t,r){var n=this,o=e.target,i=o.name?o.name:r.name,a=this.getEventTargetValue(e,r);if(p.a.trace((function(){return"Form#handleEvent "+t+" "+i+" = "+a})),"onChange"!==t){if(!0===ie.isFirst(this.state.context.stage)){var s=ae.buildHttpConfigForFormMember(this.state.formConfig,t,i,a,this.props);p.a.trace("Form#handleEvent, submitting: "+s.path+"\n",s),u()(s).done((function(e){if(y.logResponse(e,t),"onClick"===t){var o=e.entity,i=y.updateMultiChoice(n.state.formConfig,r,o);n.updateFormConfig(i)}else n.printMessages(e)}),(function(e){n.onError(e,s.path)}))}}else this.updateValues(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},i,a))}},{key:"isEventAccepted",value:function(e,t){var r;if(t.multiChoice){var n=this.getEventTargetValue(e,t);if(null!=n){var o=y.getIdForDefaultSelectOption(t),i=document.getElementById(o).value;r=n!==i,p.a.trace((function(){return"Form#isEventAccepted accepted: "+r+", target.value: "+n+", default slection: "+i}))}else r=!!t.choices}else r=!0;return p.a.trace((function(){return"Form#isEventAccepted. accepted: "+r+", FormMember: "+t.name})),r}},{key:"onChange",value:function(e,t){p.a.trace("Form#onChange: ",t.target.value),this.isEventAccepted(t,e)&&this.handleEvent(t,"onChange",e)}},{key:"onClick",value:function(e,t){if(p.a.trace("Form#onClick: ",t.target.value),this.isEventAccepted(t,e)){var r=this.getEventTargetValue(t,e);null!==r&&""!==r&&void 0!==r&&this.handleEvent(t,"onClick",e)}}},{key:"onBlur",value:function(e,t){p.a.trace("Form#onBlur: ",t.target.value),!0!==this.props.asyncvalidation&&"true"!==this.props.asyncvalidation||this.isEventAccepted(t,e)&&this.handleEvent(t,"onBlur",e)}},{key:"nextStage",value:function(){var e=this.state.context.stage,t=ie.next(e,this.props.express);return t}},{key:"isLastStage",value:function(){return ie.isLast(this.nextStage())}},{key:"getSuccessMessage",value:function(e){return e||(e="Success"),{errors:null,infos:{0:e}}}},{key:"isApiPath",value:function(e){var t=y.apibasepath(this.props);return e&&t&&0===e.indexOf(t)}},{key:"pathMatchesFormConfig",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.formConfig;if(null==e||null==r)t=!1;else{var n=y.basepath(this.props),o=y.buildPath(n,[r.action]);t=0===e.indexOf(o),p.a.debug((function(){return"Form#pathMatchesFormConfig "+t+", lhs: "+e+", rhs: "+o}))}return t}},{key:"onSuccessSubmit",value:function(e,t){var r=this;y.logResponse(e,"Form#onSuccessSubmit");var n=!0===this.isLastStage(),o=e.entity;if(n){var i=o.targetOnCompletion;if(p.a.trace("Form#onSuccessSubmit lastState targetOnCompletion: ",i),null==i)this.loadInitialDataForConfig(o,this.getSuccessMessage());else if(!1===this.pathMatchesFormConfig(i,o))this.isApiPath(i)?(p.a.debug("Form#onSuccessSubmit Returning to: "+i),this.loadInitialData(i,this.getSuccessMessage())):(p.a.debug("Form#onSuccessSubmit Relocating to: "+i),window.location=i);else{var u=this.state.pendingFormConfig,a=y.hasMatchingFormId(u,i);if(p.a.trace((function(){return"Form#onSuccessSubmit Use pending FormConfig: "+a+", target on completion: "+i+", pendingFormConfig.fid: "+(u?u.fid:null)})),!1===a)this.loadInitialDataForConfig(o,this.getSuccessMessage());else{var s=R.addNewlyCreated(e,u),c=this.buildDefaultPath(u)+"?fid="+u.fid;this.getRequest(c,(function(e){var t=e.entity,n=y.collectFormData(t);n=y.collectFormData(u,n),null!=s&&(n[s.name]=s.value,p.a.trace((function(){return"Updated form value: "+s.name+" = "+s.value}))),p.a.trace("Form#onSuccessSubmit form values: ",n);var o=r.getRefreshedState({},n,r.getSuccessMessage());o.formConfig=t,o.pendingFormConfig=null;r.updateStates(o,!0)}))}}}else{var f=n?ie.BEGIN:this.nextStage();this.updateStates({context:{stage:f},formConfig:o,messages:{errors:null,infos:null}})}y.logFormConfig(o,"Form#onSuccessSubmit")}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var r=this.state.formConfig,n=this.state.values,o=this.state.context.stage,i=ae.buildHttpConfigForForm(r,"onSubmit",n,o,this.props);this.props.onSubmit?this.props.onSubmit(e,i):(p.a.debug("Form#onSubmit, submitting: "+i.path+"\n",i),u()(i).done((function(e){t.onSuccessSubmit(e,i.path)}),(function(e){t.onError(e,i.path)})))}},{key:"isFormDisabled",value:function(){var e=this,t=this.state.context.stage,r=this.state.formConfig.action,n=t===ie.VALIDATE||"read"===r;return p.a.trace((function(){return"Form#isFormDisabled "+n+", State.context: "+p.a.toMessage(e.state.context)})),n}},{key:"getFormHeading",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.formConfig,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.context.stage;if(this.props.getFormHeading)e=this.props.getFormHeading(t,r);else{var n=t.form.displayName,o=this.state.formConfig.action;e="read"===o?"Details for selected "+n:r===ie.BEGIN?"Enter "+n+" details":r===ie.VALIDATE?"Confirm "+n+" entries":n+" Form"}return e}},{key:"render",value:function(){var e,t=null!==this.state.formConfig?this.state.formConfig.form:null;if(p.a.trace("Form#render state.values: ",this.state.values),y.logForm(t,"Form#render"),!1===this.state.doneInitialLoadData){var r=this.props.messageToDisplayWhileLoading?this.props.messageToDisplayWhileLoading:"..loading";e=o.a.createElement("div",null,r)}else if(null==t)e=o.a.createElement("div",null,"Received an unexpected response from the remote server. Try refreshing");else{var n,i=this.getFormHeading(),u=void 0===i&&null===i?"":o.a.createElement("div",{className:"form-heading"},i),a=this.state.messages.errors;p.a.trace("Form#render errors: ",a);var s=null===(n=a&&1==a.length?"Please review one error below":a&&a.length>1?"Please review "+a.length+" errors below":null)?null:o.a.createElement("div",{autoFocus:!0,className:"error-message"},n),c=this.state.messages.infos;p.a.trace("Form#render infos: ",c),e=o.a.createElement("form",null,u,s,o.a.createElement(we,{id:"infos",ref:"infos",className:"info-message",messages:c}),o.a.createElement(Ce,ce({},this.props,{errors:a,form:t,values:this.state.values,disabled:this.isFormDisabled(),onChange:this.onChange,onClick:this.onClick,onBlur:this.onBlur,onBeginReferencedForm:this.onBeginReferencedForm})),o.a.createElement("button",{type:"reset",className:"button"},"Reset"),"",o.a.createElement("button",{type:"submit",className:"button primary-button",onClick:this.onSubmit},"Submit"))}return e}}]),r}(o.a.Component),we=function(e){de(r,e);var t=me(r);function r(){return fe(this,r),t.apply(this,arguments)}return pe(r,[{key:"hasValues",value:function(e){var t=!(null===e||!e);return p.a.trace("FormMessages#hasValues: ",t),t}},{key:"toDisplayFormat",value:function(e){return e.fieldName?e.fieldName+": "+e.message:e.message}},{key:"render",value:function(){var e=this;p.a.trace("FormMessages#render messages: ",this.props.messages);var t=!1===this.hasValues(this.props.messages)?null:Object.values(this.props.messages).map((function(t,r){return o.a.createElement("div",{key:"message-group-message-"+e.props.id+"-"+r,className:e.props.className},e.toDisplayFormat(t))}));return null===t?null:o.a.createElement("div",{autoFocus:!0,className:"message-group"},t)}}]),r}(o.a.Component),Ce=function(e){de(r,e);var t=me(r);function r(){return fe(this,r),t.apply(this,arguments)}return pe(r,[{key:"collectFormMemberMessages",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return null!=e&&e&&e.forEach((function(e,n){e.fieldName===t.name&&(r[n]=e)})),r}},{key:"getValue",value:function(e){return this.props.values[e]}},{key:"render",value:function(){var e=this;return this.props.form.members.filter((function(e){return"hidden"!==e.type})).map((function(t){return o.a.createElement(ne,ce({},e.props,{errors:e.collectFormMemberMessages(e.props.errors,t),form:e.props.form,value:e.getValue(t.name),disabled:e.props.disabled,onChange:e.props.onChange,onClick:e.props.onClick,onBlur:e.props.onBlur,onBeginReferencedForm:e.props.onBeginReferencedForm,key:t.id+"-row",ref:t.id+"-row",formMember:t}))}))}},{key:"addCurrentLocation",value:function(e){}}]),r}(o.a.Component);t.default=be}])}));
//# sourceMappingURL=web-forms.js.map